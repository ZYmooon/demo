<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>   
    *{
      margin: 0;
      padding: 0;
      font-size: 16px;
    }
    .ct{
      position: relative;
      margin: 20px;
    }
    .item{
      width: 9rem;
      position: absolute;
      margin-right: 10px;
      margin-top: 10px;
      transition: all 2s;
    }
    .h1{
      height: 10rem;
      background: red;
    }
    .h2{
      height: 15rem;
      background: #ccc;
      
    }
    .h3{
      height: 25rem;
      background: blue;
    }
  </style>
</head>

<body>
  <div class="ct">
    <div class="item h1">
      1
    </div>
    <div class="item h2">
      2
    </div>
    <div class="item h3">
      3
    </div>
    <div class="item h1">
      4
    </div>
    <div class="item h2">
      5
    </div>
    <div class="item h3">
      6
    </div>
    <div class="item h3">
      7
    </div>
    <div class="item h3">
      8
    </div>
    <div class="item h1">
      9
    </div>
    <div class="item h1">
      10
    </div>
    <div class="item h2">
      11
    </div>
    <div class="item h1">
      12
    </div>
    <div class="item h2">
      13
    </div>
    <div class="item h2">
      14
    </div>
    <div class="item h1">
      15
    </div>
    <div class="item h1">
      16
    </div>
    <div class="item h3">
      17
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-git.js"></script>
  <script>
    var Render = (function () {
      function init() {
        waterFull();
        $(window).resize(function () { //窗口尺寸每次变化，执行一次瀑布流
          waterFull();
        });
      }

      function waterFull() {
        var $ctWidth = $('.ct').width(),//获取容器宽度
          $nodeWidth = $('.item').width(),//获取每个节点宽度
          colLength = parseInt($ctWidth / $nodeWidth),//获取页面每一行数量
          itemArr = [];//初始化数组

        for (var i = 0; i < colLength; i++) {
          itemArr[i] = 0;//便利数组
        }
        $('.item').each(function () {
          var minValue = Math.min.apply(null, itemArr);//获取最小值
          var minIndex = itemArr.indexOf(minValue);//获取最小的索引值

          $(this).css({//定义位置
            top: itemArr[minIndex],//
            left: $(this).outerWidth(true) * minIndex
          });
          itemArr[minIndex] += $(this).outerHeight(true);
        });
      }
      return {
        init: init
      };
    })();
    Render.init();
  </script>
</body>

</html>
